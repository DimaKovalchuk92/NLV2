<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ | Platform OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style-cabinet.css"> </head>
<body class="bg-slate-50 text-slate-900 font-sans flex min-h-screen">

    <!-- Sidebar: main navigation for specialist panel. Edit links below as needed -->
    <aside class="sidebar fixed h-screen z-50">
    <div class="logo font-black italic tracking-tighter">
        NEW LIFE <span class="text-blue-600">VISION</span>
    </div>
        <nav class="mt-12 space-y-4">
            <!-- sidebar links: change text/href or ids for custom behaviour -->
            <a href="#" class="sidebar-link active">üë• <span data-translate-key="nav_clients">–ú–æ–∏ –∫–ª–∏–µ–Ω—Ç—ã</span></a>
            <!-- id="sidebar-calendar" used in script to open schedule tab -->
            <a href="#" id="sidebar-calendar" class="sidebar-link">üìÖ <span data-translate-key="nav_calendar">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span></a>
            <a href="#" class="sidebar-link">üß© <span data-translate-key="nav_methodology">–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è</span></a>
            <a href="index.html" class="sidebar-link">üè† <span data-translate-key="nav_exit">–í—ã–π—Ç–∏</span></a>
        </nav>
    <div class="mt-auto pt-10">
        <span class="px-3 py-1 bg-slate-900 text-white text-[10px] font-bold rounded-md uppercase tracking-widest" data-translate-key="role_specialist">
            –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç
        </span>
    </div>
</aside>

    <main class="content-area">
        <header class="header-main">
             <div class="user-greeting">
                <div>
                    <h1 id="specialist-name" class="text-3xl font-bold">–ü–∞–Ω–µ–ª—å –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</h1>
                    <p id="specialist-spec" class="text-slate-500 font-medium"></p>
                </div>
                <div id="specialist-avatar" class="avatar shadow-lg bg-slate-900">A</div>
             </div>
        </header>

        <!-- –í–µ—Ä—Ö–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ structure.json -->
        <nav class="nav-tabs-container" role="tablist">
            <div class="nav-tab active" data-target="tab-dashboard" data-translate-key="tab_dashboard">–î–∞—à–±–æ—Ä–¥</div>
            <div class="nav-tab" data-target="tab-cases" data-translate-key="tab_cases">–ö–µ–π—Å—ã</div>
            <div class="nav-tab" data-target="tab-marketplace" data-translate-key="tab_marketplace">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</div>
            <div class="nav-tab" data-target="tab-finance" data-translate-key="tab_finance">–§–∏–Ω–∞–Ω—Å—ã</div>
            <div class="nav-tab" data-target="tab-schedule" data-translate-key="tab_schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
            <div class="nav-tab" onclick="openAdminSettingsModal()" data-translate-key="tab_settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</div>
        </nav>

        <!-- Tab content: panes are switched by top tabs. Use data-target values on tabs. -->
        <div class="tab-content">
            <section id="tab-dashboard" class="tab-pane active">
                <h2 class="section-title mb-8" data-translate-key="dashboard_title">–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã (Case Engine)</h2>
                <div id="cases-list" class="grid grid-cols-1 gap-4">
                    <!-- –∫–µ–π—Å—ã –±—É–¥—É—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </section>

            <section id="tab-cases" class="tab-pane">
                <h2 class="section-title mb-6" data-translate-key="tab_cases">–ö–µ–π—Å—ã</h2>
                <p class="text-slate-500">–°–ø–∏—Å–æ–∫ –∫–µ–π—Å–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–∏ –±—É–¥–µ—Ç –∑–¥–µ—Å—å.</p>
            </section>

            <section id="tab-marketplace" class="tab-pane">
                <h2 class="section-title mb-6" data-translate-key="tab_marketplace">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h2>
                <p class="text-slate-500">–ö–∞—Ç–∞–ª–æ–≥ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≥—Ä–∞–º–º.</p>
            </section>

            <section id="tab-finance" class="tab-pane">
                <h2 class="section-title mb-6" data-translate-key="tab_finance">–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–∞–Ω–µ–ª—å</h2>
                <p class="text-slate-500">–ü–ª–∞—Ç–µ–∂–∏, —Å—á–µ—Ç–∞ –∏ –æ—Ç—á—ë—Ç—ã.</p>
            </section>

            <section id="tab-schedule" class="tab-pane">
                <h2 class="section-title mb-6" data-translate-key="tab_schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
                <!-- Date selector: change to your own datepicker widget if desired -->
                <div class="mb-4">
                    <label class="text-sm text-slate-600"><span data-translate-key="schedule_select_date">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:</span>
                        <input id="schedule-date" type="date" class="ml-2 px-3 py-2 border rounded">
                    </label>
                </div>
                <!-- Schedule list: JS renders items here. Each item gets data-id and has a delete button. -->
                <div id="schedule-list" class="space-y-4">
                    <!-- —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–æ –∑–¥–µ—Å—å -->
                </div>
            </section>
        </div>

    </main>

    <script src="config.js"></script>
    <script src="modules/mock-api.js"></script>
    <script>
        // Initialize mock data
        MockAPI.init();
        let adminLastReadTime = parseInt(localStorage.getItem('adminLastReadTime') || '0');

        const translations = {
            ru: {
                nav_clients: '–ú–æ–∏ –∫–ª–∏–µ–Ω—Ç—ã',
                nav_calendar: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å',
                nav_methodology: '–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è',
                nav_exit: '–í—ã–π—Ç–∏',
                role_specialist: '–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç',
                header_title: '–ü–∞–Ω–µ–ª—å',
                header_title_span: '–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞',
                tab_dashboard: '–î–∞—à–±–æ—Ä–¥',
                tab_cases: '–ö–µ–π—Å—ã',
                tab_marketplace: '–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å',
                tab_finance: '–§–∏–Ω–∞–Ω—Å—ã',
                tab_schedule: '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ',
                tab_settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã',
                dashboard_title: '–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã (Case Engine)',
                case_status: '–°—Ç–∞—Ç—É—Å',
                case_open_map: '–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É',
                case_chat: '–ß–∞—Ç',
                case_assign_meeting: '–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É',
                schedule_title: '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ',
                schedule_select_date: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:',
                schedule_no_meetings: '–ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á',
                schedule_delete: '–£–¥–∞–ª–∏—Ç—å',
                schedule_delete_confirm: '–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è?',
                settings_title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã',
                settings_appearance: '–í–Ω–µ—à–Ω–∏–π –≤–∏–¥',
                settings_theme_light: '–°–≤–µ—Ç–ª–∞—è',
                settings_theme_dark: '–¢–µ–º–Ω–∞—è',
                settings_language: '–Ø–∑—ã–∫ —Å–∏—Å—Ç–µ–º—ã',
                lang_ru: '–†—É—Å—Å–∫–∏–π',
                lang_ua: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
                lang_en: 'English',
                meeting_modal_title: '–ù–æ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞',
                meeting_modal_client: '–ö–ª–∏–µ–Ω—Ç:',
                meeting_modal_datetime: '–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è',
                meeting_modal_topic: '–¢–µ–º–∞ –≤—Å—Ç—Ä–µ—á–∏',
                meeting_modal_topic_placeholder: '–ù–∞–ø—Ä–∏–º–µ—Ä: Core Session',
                meeting_modal_cancel: '–û—Ç–º–µ–Ω–∞',
                meeting_modal_assign: '–ù–∞–∑–Ω–∞—á–∏—Ç—å',
                meeting_alert_select_time: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è',
                meeting_system_message: 'üìÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–æ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞: "{topic}" –Ω–∞ {datetime}',
                meeting_default_topic: '–ü–ª–∞–Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è',
                chat_modal_title: '–ß–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–æ–º',
                chat_modal_placeholder: '–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
                date_today: '–°–µ–≥–æ–¥–Ω—è',
                date_yesterday: '–í—á–µ—Ä–∞',
                settings_delete_account_title: '–£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞',
                settings_delete_account_desc: '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ. –í—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.',
                settings_delete_account_btn: '–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç',
                settings_delete_account_confirm: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.',
                settings_profile_title: '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å',
                settings_profile_name: '–ü–æ–ª–Ω–æ–µ –∏–º—è',
                settings_profile_spec: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è',
                settings_profile_bio: '–ë–∏–æ–≥—Ä–∞—Ñ–∏—è',
                settings_profile_welcome: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'
            },
            ua: {
                nav_clients: '–ú–æ—ó –∫–ª—ñ—î–Ω—Ç–∏',
                nav_calendar: '–ö–∞–ª–µ–Ω–¥–∞—Ä',
                nav_methodology: '–ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—è',
                nav_exit: '–í–∏–π—Ç–∏',
                role_specialist: '–°–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç',
                header_title: '–ü–∞–Ω–µ–ª—å',
                header_title_span: '–°–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞',
                tab_dashboard: '–î–∞—à–±–æ—Ä–¥',
                tab_cases: '–ö–µ–π—Å–∏',
                tab_marketplace: '–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å',
                tab_finance: '–§—ñ–Ω–∞–Ω—Å–∏',
                tab_schedule: '–†–æ–∑–∫–ª–∞–¥',
                tab_settings: '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏',
                dashboard_title: '–ê–∫—Ç–∏–≤–Ω—ñ –∫–µ–π—Å–∏ (Case Engine)',
                case_status: '–°—Ç–∞—Ç—É—Å',
                case_open_map: '–í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–∞—Ä—Ç—É',
                case_chat: '–ß–∞—Ç',
                case_assign_meeting: '–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –∑—É—Å—Ç—Ä—ñ—á',
                schedule_title: '–†–æ–∑–∫–ª–∞–¥',
                schedule_select_date: '–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É:',
                schedule_no_meetings: '–ù–µ–º–∞—î –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –∑—É—Å—Ç—Ä—ñ—á–µ–π',
                schedule_delete: '–í–∏–¥–∞–ª–∏—Ç–∏',
                schedule_delete_confirm: '–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∑–∞–ø–∏—Å —Ä–æ–∑–∫–ª–∞–¥—É?',
                settings_title: '–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏',
                settings_appearance: '–ó–æ–≤–Ω—ñ—à–Ω—ñ–π –≤–∏–≥–ª—è–¥',
                settings_theme_light: '–°–≤—ñ—Ç–ª–∞',
                settings_theme_dark: '–¢–µ–º–Ω–∞',
                settings_language: '–ú–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∏',
                lang_ru: '–†—É—Å—Å–∫–∏–π',
                lang_ua: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
                lang_en: 'English',
                meeting_modal_title: '–ù–æ–≤–∞ –∑—É—Å—Ç—Ä—ñ—á',
                meeting_modal_client: '–ö–ª—ñ—î–Ω—Ç:',
                meeting_modal_datetime: '–î–∞—Ç–∞ —ñ —á–∞—Å',
                meeting_modal_topic: '–¢–µ–º–∞ –∑—É—Å—Ç—Ä—ñ—á—ñ',
                meeting_modal_topic_placeholder: '–ù–∞–ø—Ä–∏–∫–ª–∞–¥: Core Session',
                meeting_modal_cancel: '–°–∫–∞—Å—É–≤–∞—Ç–∏',
                meeting_modal_assign: '–ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏',
                meeting_alert_select_time: '–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É —Ç–∞ —á–∞—Å',
                meeting_system_message: 'üìÖ –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–æ –Ω–æ–≤—É –∑—É—Å—Ç—Ä—ñ—á: "{topic}" –Ω–∞ {datetime}',
                meeting_default_topic: '–ü–ª–∞–Ω–æ–≤–∞ —Å–µ—Å—ñ—è',
                chat_modal_title: '–ß–∞—Ç –∑ –∫–ª—ñ—î–Ω—Ç–æ–º',
                chat_modal_placeholder: '–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...',
                date_today: '–°—å–æ–≥–æ–¥–Ω—ñ',
                date_yesterday: '–í—á–æ—Ä–∞',
                settings_delete_account_title: '–í–∏–¥–∞–ª–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—É',
                settings_delete_account_desc: '–¶—è –¥—ñ—è —î –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–æ—é. –í—Å—ñ –≤–∞—à—ñ –¥–∞–Ω—ñ –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ.',
                settings_delete_account_btn: '–í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç',
                settings_delete_account_confirm: '–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç? –¶—è –¥—ñ—è —î –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–æ—é.',
                settings_profile_title: '–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å',
                settings_profile_name: '–ü–æ–≤–Ω–µ —ñ–º\'—è',
                settings_profile_spec: '–°–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è',
                settings_profile_bio: '–ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è',
                settings_profile_welcome: '–í—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è'
            },
            en: {
                nav_clients: 'My Clients',
                nav_calendar: 'Calendar',
                nav_methodology: 'Methodology',
                nav_exit: 'Exit',
                role_specialist: 'Specialist',
                header_title: 'Specialist',
                header_title_span: 'Panel',
                tab_dashboard: 'Dashboard',
                tab_cases: 'Cases',
                tab_marketplace: 'Marketplace',
                tab_finance: 'Finance',
                tab_schedule: 'Schedule',
                tab_settings: 'Page Settings',
                dashboard_title: 'Active Cases (Case Engine)',
                case_status: 'Status',
                case_open_map: 'Open Map',
                case_chat: 'Chat',
                case_assign_meeting: 'Assign Meeting',
                schedule_title: 'Schedule',
                schedule_select_date: 'Select date:',
                schedule_no_meetings: 'No scheduled meetings',
                schedule_delete: 'Delete',
                schedule_delete_confirm: 'Delete this schedule entry?',
                settings_title: 'Page Settings',
                settings_appearance: 'Appearance',
                settings_theme_light: 'Light',
                settings_theme_dark: 'Dark',
                settings_language: 'System Language',
                lang_ru: '–†—É—Å—Å–∫–∏–π',
                lang_ua: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
                lang_en: 'English',
                meeting_modal_title: 'New Meeting',
                meeting_modal_client: 'Client:',
                meeting_modal_datetime: 'Date and time',
                meeting_modal_topic: 'Meeting Topic',
                meeting_modal_topic_placeholder: 'E.g., Core Session',
                meeting_modal_cancel: 'Cancel',
                meeting_modal_assign: 'Assign',
                meeting_alert_select_time: 'Please select a date and time',
                meeting_system_message: 'üìÖ New meeting scheduled: "{topic}" on {datetime}',
                meeting_default_topic: 'Scheduled Session',
                chat_modal_title: 'Chat with Client',
                chat_modal_placeholder: 'Write a message...',
                date_today: 'Today',
                date_yesterday: 'Yesterday',
                settings_delete_account_title: 'Delete Account',
                settings_delete_account_desc: 'This action is irreversible. All your data will be deleted.',
                settings_delete_account_btn: 'Delete Account',
                settings_delete_account_confirm: 'Are you sure you want to delete your account? This action is irreversible.',
                settings_profile_title: 'My Profile',
                settings_profile_name: 'Full Name',
                settings_profile_spec: 'Specialization',
                settings_profile_bio: 'Biography',
                settings_profile_welcome: 'Welcome Message'
            }
        };

        // --- debug panel (visible on the page) to help when DevTools is not used ---
        window.__STATUS_DEBUG = true;
        function initDebugPanel(){
            if (!window.__STATUS_DEBUG) return null;
            let d = document.getElementById('debug-panel');
            if (!d){
                d = document.createElement('div');
                d.id = 'debug-panel';
                d.style.position = 'fixed';
                d.style.right = '12px';
                d.style.bottom = '12px';
                d.style.width = '320px';
                d.style.maxHeight = '40vh';
                d.style.overflow = 'auto';
                d.style.background = 'rgba(255,255,255,0.95)';
                d.style.border = '1px solid rgba(0,0,0,0.06)';
                d.style.boxShadow = '0 8px 30px rgba(2,6,23,0.08)';
                d.style.fontSize = '12px';
                d.style.zIndex = 999999;
                d.style.padding = '6px';
                d.style.borderRadius = '8px';
                d.innerHTML = '<strong style="display:block;margin-bottom:6px">DEBUG</strong>';
                document.body.appendChild(d);
            }
            return d;
        }
        const __debugPanel = initDebugPanel();
        function debugLog(){
            if (!window.__STATUS_DEBUG) return;
            try{
                const args = Array.from(arguments).map(a => (typeof a === 'object' ? JSON.stringify(a) : String(a)) ).join(' ');
                if (__debugPanel){ const el = document.createElement('div'); el.textContent = args; el.style.padding = '4px 0'; el.style.borderBottom = '1px solid rgba(0,0,0,0.03)'; __debugPanel.appendChild(el); __debugPanel.scrollTop = __debugPanel.scrollHeight; }
                console.log('[STATUS-DBG]', ...arguments);
            }catch(e){ console.log('[STATUS-DBG]', ...arguments); }
        }

        // Render cases into the dashboard list
        function renderCases(){
            const list = document.getElementById('cases-list');
            if (!list) return;
            const cases = MockAPI.getCases();
            const messages = MockAPI.getChat();
            const lastMsg = messages.length > 0 ? messages[messages.length - 1] : null;
            const hasUnread = lastMsg && lastMsg.from === 'client' && lastMsg.time > adminLastReadTime;
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];

            list.innerHTML = cases.map(c=>`
                <div class="activity-card">
                    <div class="left">
                        <h3 class="text-xl font-bold mb-2">${c.title}</h3>
                        <div class="text-slate-400 text-sm mb-2">(${c.id})</div>
                        <div class="status-wrap">
                            <button class="status-btn" data-id="${c.id}">${dict.case_status}: <strong>${c.status}</strong></button>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="px-6 py-2 bg-blue-600 text-white rounded-xl font-bold text-sm">${dict.case_open_map}</button>
                        <button onclick="openChat('${c.id}', '${c.title.replace(/"/g, '&quot;')}')" class="px-6 py-2 bg-slate-100 text-slate-600 rounded-xl font-bold text-sm hover:bg-blue-50 hover:text-blue-600 transition relative">
                            ${dict.case_chat}
                            ${hasUnread ? '<span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"></span>' : ''}
                        </button>
                        <button data-action="assign-meeting" data-id="${c.id}" data-title="${c.title.replace(/"/g, '&quot;')}" class="px-6 py-2 bg-green-600 text-white rounded-xl font-bold text-sm">${dict.case_assign_meeting}</button>
                    </div>
                </div>
            `).join('');

            attachStatusHandlers();
        }

        /**
         * E02: Workspace Personalization
         * Loads specialist profile data (name, specialization) into the header and settings modal.
         */
        function loadSpecialistProfile() {
            const user = MockAPI.getLoggedInUser();
            if (!user || !user.profile) {
                console.warn("Specialist profile data not found. UI will not be personalized.");
                return;
            }

            // --- Header Personalization ---
            document.getElementById('specialist-name').textContent = user.profile.fullName || '–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç';
            document.getElementById('specialist-spec').textContent = (user.profile.specializations && user.profile.specializations[0]) || '';
            document.getElementById('specialist-avatar').textContent = (user.profile.fullName && user.profile.fullName.charAt(0).toUpperCase()) || 'S';

            // --- Settings Modal Personalization ---
            document.getElementById('profile-display-name').textContent = user.profile.fullName || '...';
            document.getElementById('profile-display-spec').textContent = (user.profile.specializations && user.profile.specializations.join(', ')) || '...';
            document.getElementById('profile-display-bio').textContent = user.profile.bio || '...';
            document.getElementById('profile-display-welcome').textContent = user.profile.welcomeMessage || '...';

            // Per request: confirm welcome message loading
            if (user.profile.welcomeMessage) {
                console.log('–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ->', `"${user.profile.welcomeMessage}"`);
            }
        }

        // --- Status Portal Logic ---
        let statusPortal = null;

        function initStatusPortal() {
            if (statusPortal) return;
            statusPortal = document.getElementById('status-portal');
            if (!statusPortal) {
                statusPortal = document.createElement('div');
                statusPortal.id = 'status-portal';
                statusPortal.className = 'status-portal';
                document.body.appendChild(statusPortal);
            }
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–º absolute, —á—Ç–æ–±—ã –º–µ–Ω—é —Å–∫—Ä–æ–ª–ª–∏–ª–æ—Å—å –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π
            statusPortal.style.position = 'absolute';
            
            // Handle clicks inside portal
            statusPortal.addEventListener('click', (e) => {
                const item = e.target.closest('.status-item');
                if (item) {
                    const id = statusPortal.dataset.caseId;
                    const val = item.dataset.value;
                    MockAPI.updateCase(id, { status: val });
                    closePortal();
                    renderCases();
                }
            });
        }

        function closePortal() {
            if (!statusPortal) return;
            statusPortal.classList.remove('open');
            document.removeEventListener('click', onOutsideClick);
            setTimeout(() => {
                if (!statusPortal.classList.contains('open')) statusPortal.style.display = 'none';
            }, 200);
        }

        function onOutsideClick(e) {
            if (statusPortal.contains(e.target)) return;
            closePortal();
        }

        function openPortal(btn) {
            initStatusPortal();
            // Toggle if same button
            if (statusPortal.classList.contains('open') && statusPortal.dataset.caseId === btn.dataset.id) {
                closePortal();
                return;
            }
            closePortal(); // close any other

            const STATUS_VALUES = ['analysis','active','closing','paused'];
            statusPortal.innerHTML = STATUS_VALUES.map(s=>`<div class="status-item" data-value="${s}">${s}</div>`).join('');
            statusPortal.dataset.caseId = btn.dataset.id;
            statusPortal.style.display = 'block';

            const rect = btn.getBoundingClientRect();
            const mw = 160;
            
            // –°—á–∏—Ç–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (viewport + scroll)
            let left = rect.left + window.scrollX;
            let top = rect.bottom + 8 + window.scrollY;

            if (rect.left + mw > window.innerWidth - 8) {
                left = (window.innerWidth - mw - 8) + window.scrollX;
            }

            statusPortal.style.left = left + 'px';
            statusPortal.style.top = top + 'px';
            
            requestAnimationFrame(() => statusPortal.classList.add('open'));
            setTimeout(() => document.addEventListener('click', onOutsideClick), 0);
        }

        function attachStatusHandlers(){
            initStatusPortal();
            document.querySelectorAll('.status-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    openPortal(btn);
                });
            });
        }

        function renderSchedule(dateISO){
            const list = document.getElementById('schedule-list');
            if (!list) return;
            const all = MockAPI.getSchedule();
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];
            const items = dateISO ? all.filter(it => new Date(it.time).toISOString().substr(0,10) === dateISO) : all;
            if (!items.length) { list.innerHTML = `<div class="text-slate-500">${dict.schedule_no_meetings}</div>`; return; }
            list.innerHTML = items.map(it=>`
                <div class="activity-card p-4" data-id="${it.id}">
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-bold">${it.title}</div>
                            <div class="text-sm text-slate-500">${new Date(it.time).toLocaleString(lang)}</div>
                        </div>
                        <div>
                            <button onclick="deleteSchedule('${it.id}')" class="btn-delete px-4 py-2 bg-red-500 text-white rounded-md text-sm">${dict.schedule_delete}</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function deleteSchedule(id){
            if (!id) return;
            const lang = localStorage.getItem('appLang') || 'ru';
            if (!confirm(translations[lang].schedule_delete_confirm)) return;
            MockAPI.deleteSchedule(id);
            const dateInput = document.getElementById('schedule-date');
            renderSchedule(dateInput ? dateInput.value : undefined);
        }

        // --- Meeting Modal Logic ---
        let currentMeetingCase = null;

        function assignMeeting(caseId, caseTitle) {
            currentMeetingCase = { id: caseId, title: caseTitle };
            
            const modal = document.getElementById('meeting-modal');
            const titleEl = document.getElementById('meeting-case-title');
            const dateInput = document.getElementById('meeting-datetime');
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];
            
            if (titleEl) titleEl.innerText = `${dict.meeting_modal_client} ${caseTitle}`;
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è + 1 —á–∞—Å –∫–∞–∫ –¥–µ—Ñ–æ–ª—Ç
            const now = new Date();
            now.setHours(now.getHours() + 1);
            now.setMinutes(0);
            // –§–æ—Ä–º–∞—Ç –¥–ª—è input type="datetime-local": YYYY-MM-DDTHH:mm
            const iso = now.toISOString().slice(0, 16);
            if (dateInput) dateInput.value = iso;

            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeMeetingModal() {
            const modal = document.getElementById('meeting-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            currentMeetingCase = null;
        }

        function confirmMeeting() {
            if (!currentMeetingCase) return;
            
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];
            const dateInput = document.getElementById('meeting-datetime');
            const topicInput = document.getElementById('meeting-topic');
            
            if (!dateInput.value) {
                alert(dict.meeting_alert_select_time);
                return;
            }

            const ts = new Date(dateInput.value).getTime();
            const topic = topicInput.value.trim() || dict.meeting_default_topic;
            const title = `${topic} (${currentMeetingCase.title})`;
            const datetimeString = new Date(ts).toLocaleString(lang, {day:'numeric', month:'long', hour:'2-digit', minute:'2-digit'});

            // 1. –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ (Activity Hub)
            MockAPI.addSchedule({ 
                title: title, 
                time: ts, 
                caseId: currentMeetingCase.id,
                type: 'session' // –º–µ—Ç–∫–∞ —Ç–∏–ø–∞
            });

            // 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É (—Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç)
            MockAPI.addMessage({
                from: 'system',
                text: dict.meeting_system_message.replace('{topic}', topic).replace('{datetime}', datetimeString)
            });

            closeMeetingModal();
            renderSchedule();
        }

        // --- Chat Logic ---
        let currentChatCaseId = null;

        function openChat(caseId, clientName) {
            currentChatCaseId = caseId;
            const modal = document.getElementById('admin-chat-modal');
            const nameEl = document.getElementById('chat-client-name');
            if (nameEl) nameEl.innerText = clientName || '–ö–ª–∏–µ–Ω—Ç';
            
            if (modal) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                
                // Mark as read
                adminLastReadTime = Date.now();
                localStorage.setItem('adminLastReadTime', adminLastReadTime);
                renderCases(); // Update list to remove dot
                renderAdminChat();
            }
        }

        function closeChatModal() {
            const modal = document.getElementById('admin-chat-modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
            currentChatCaseId = null;
        }

        function renderAdminChat() {
            const container = document.getElementById('admin-chat-history');
            if (!container) return;
            
            const messages = MockAPI.getChat();
            messages.sort((a,b) => a.time - b.time);
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];
            
            let lastDateStr = '';
            const now = new Date();
            const yesterday = new Date();
            yesterday.setDate(now.getDate() - 1);

            container.innerHTML = messages.map(msg => {
                const isMe = msg.from === 'admin'; // Specialist is admin
                const isSystem = msg.from === 'system';
                const date = new Date(msg.time);

                // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º
                let dateHeader = '';
                const currentDateStr = date.toDateString();
                if (currentDateStr !== lastDateStr) {
                    let label = date.toLocaleDateString(lang, { day: 'numeric', month: 'long' });
                    if (currentDateStr === now.toDateString()) label = dict.date_today;
                    else if (currentDateStr === yesterday.toDateString()) label = dict.date_yesterday;
                    dateHeader = `<div class="flex justify-center my-6"><span class="text-xs font-bold text-slate-400 bg-slate-100 px-3 py-1 rounded-full">${label}</span></div>`;
                    lastDateStr = currentDateStr;
                }
                
                if (isSystem) {
                    return dateHeader + `
                        <div class="flex justify-center my-4">
                            <span class="bg-slate-100 text-slate-500 text-xs font-bold px-3 py-1 rounded-full border border-slate-200 uppercase tracking-wider">
                                ${msg.text}
                            </span>
                        </div>`;
                }
                
                return dateHeader + `
                    <div class="flex ${isMe ? 'justify-end' : 'justify-start'} mb-4">
                        <div class="max-w-[75%] p-4 rounded-2xl shadow-sm ${
                            isMe 
                            ? 'bg-blue-600 text-white rounded-tr-none' 
                            : 'bg-white border border-slate-100 text-slate-800 rounded-tl-none'
                        }">
                            <div class="text-sm leading-relaxed font-medium">${msg.text}</div>
                            <div class="text-[10px] mt-1 opacity-60 text-right font-bold">
                                ${new Date(msg.time).toLocaleTimeString(lang, {hour:'2-digit', minute:'2-digit'})}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            container.scrollTop = container.scrollHeight;
        }

        function sendAdminMessage() {
            const input = document.getElementById('admin-chat-input');
            if (!input) return;
            const text = input.value.trim();
            if (!text) return;
            
            MockAPI.addMessage({ from: 'admin', text: text });
            input.value = '';
            renderAdminChat();
        }

        // --- Notification Logic ---
        function playNotification() {
            const audio = document.getElementById('notification-sound');
            if (audio) {
                audio.muted = false;
                audio.currentTime = 0;
                audio.play().catch(e => console.error('Audio play failed:', e));
            }
        }

        // Unlock audio on first interaction
        function unlockAudio() {
            const audio = document.getElementById('notification-sound');
            if (audio) {
                audio.play().then(() => { audio.pause(); audio.currentTime = 0; }).catch(() => {});
            }
            document.removeEventListener('click', unlockAudio);
        }
        document.addEventListener('click', unlockAudio);

        function requestAccountDeletion() {
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];
            const confirmationMessage = dict.settings_delete_account_confirm || 'Are you sure you want to delete your account? This action is irreversible.';

            if (confirm(confirmationMessage)) {
                const user = MockAPI.getLoggedInUser();
                if (user) {
                    MockAPI.deleteUser(user.id);
                    window.location.href = 'index.html';
                }
            }
        }

        function openAdminSettingsModal() {
            const modal = document.getElementById('admin-settings-modal');
            if (modal) {
                loadSpecialistProfile(); // Load fresh data before showing
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                applyTranslations(); // Ensure new labels are translated
            }
        }

        function closeAdminSettingsModal() {
            const modal = document.getElementById('admin-settings-modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }

        // --- Settings Logic ---
        function setTheme(theme) {
            if (theme === 'dark') document.body.classList.add('dark-theme');
            else document.body.classList.remove('dark-theme');
            localStorage.setItem('appTheme', theme);

            // Update button styles to show selection
            const lightBtn = document.getElementById('admin-theme-btn-light');
            const darkBtn = document.getElementById('admin-theme-btn-dark');

            if (lightBtn && darkBtn) {
                if (theme === 'dark') {
                    darkBtn.classList.add('border-blue-500');
                    lightBtn.classList.remove('border-blue-500');
                } else {
                    lightBtn.classList.add('border-blue-500');
                    darkBtn.classList.remove('border-blue-500');
                }
            }
        }

        function setLanguage(lang) {
            localStorage.setItem('appLang', lang);
            applyTranslations();
            renderCases();
            const dateInput = document.getElementById('schedule-date');
            renderSchedule(dateInput ? dateInput.value : undefined);
        }

        function applyTranslations() {
            const lang = localStorage.getItem('appLang') || 'ru';
            const dict = translations[lang];
            if (!dict) return;

            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.getAttribute('data-translate-key');
                const translation = dict[key];
                if (translation !== undefined) {
                    if (el.matches('input[placeholder]')) {
                        el.placeholder = translation;
                    } else {
                        el.innerText = translation;
                    }
                }
            });
        }

        // Init Theme
        const savedTheme = localStorage.getItem('appTheme');
        if (savedTheme) setTheme(savedTheme);
        const savedLang = localStorage.getItem('appLang');
        if (savedLang) { const r = document.querySelector(`input[name="admin-lang"][value="${savedLang}"]`); if(r) r.checked = true; applyTranslations(); }

        window.addEventListener('storage', (e) => {
            if (e.key === 'nlv_mock_v1') {
                // If chat is open, update read time and refresh chat
                const modal = document.getElementById('admin-chat-modal');
                if (modal && !modal.classList.contains('hidden')) {
                    adminLastReadTime = Date.now();
                    localStorage.setItem('adminLastReadTime', adminLastReadTime);
                    renderAdminChat();
                }

                renderCases(); // Refresh UI to show/hide red dot
                
                const oldVal = e.oldValue ? JSON.parse(e.oldValue) : null;
                const newVal = e.newValue ? JSON.parse(e.newValue) : null;
                if (oldVal && newVal && newVal.chat.length > oldVal.chat.length) {
                    const last = newVal.chat[newVal.chat.length - 1];
                    if (last.from === 'client') playNotification();
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadSpecialistProfile();
            renderCases();
            
            // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–µ–π—Å–æ–≤ (–≤–º–µ—Å—Ç–æ inline onclick)
            const casesList = document.getElementById('cases-list');
            if (casesList) {
                casesList.addEventListener('click', (e) => {
                    const btn = e.target.closest('[data-action="assign-meeting"]');
                    if (btn) assignMeeting(btn.dataset.id, btn.dataset.title);
                });
            }

            const dateInput = document.getElementById('schedule-date');
            if (dateInput) {
                const today = new Date().toISOString().substr(0,10);
                dateInput.value = today;
                dateInput.addEventListener('change', ()=> renderSchedule(dateInput.value));
                renderSchedule(dateInput.value);
            } else {
                renderSchedule();
            }

            // Sidebar calendar link should open schedule tab and focus date
            const sideCal = document.getElementById('sidebar-calendar');
            if (sideCal) {
                sideCal.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    const schedTab = document.querySelector('.nav-tab[data-target="tab-schedule"]');
                    if (schedTab) schedTab.classList.add('active');
                    document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
                    const pane = document.getElementById('tab-schedule');
                    if (pane) pane.classList.add('active');
                    const dateInput = document.getElementById('schedule-date');
                    if (dateInput) {
                        const today = new Date().toISOString().substr(0,10);
                        dateInput.value = today;
                        dateInput.focus();
                        renderSchedule(dateInput.value);
                    }
                });
            }

            // Tab switching
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    const target = tab.getAttribute('data-target');
                    if (!target) return; // If it's a button like settings, do nothing here.
                    tab.classList.add('active');
                    document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
                    const pane = document.getElementById(target);
                    if (pane) pane.classList.add('active');
                });
            });
        });
    </script>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤—Å—Ç—Ä–µ—á–∏ -->
    <div id="meeting-modal" class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[200] hidden items-center justify-center transition-opacity">
        <div class="bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl transform transition-all scale-100">
            <h3 class="text-2xl font-black mb-2" data-translate-key="meeting_modal_title">–ù–æ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞</h3>
            <p id="meeting-case-title" class="text-slate-500 mb-6 text-sm"></p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2" data-translate-key="meeting_modal_datetime">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                    <input type="datetime-local" id="meeting-datetime" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:border-blue-500 outline-none font-bold text-slate-700">
                </div>
                <div>
                    <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2" data-translate-key="meeting_modal_topic">–¢–µ–º–∞ –≤—Å—Ç—Ä–µ—á–∏</label>
                    <input type="text" id="meeting-topic" class="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:border-blue-500 outline-none font-bold text-slate-700" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Core Session" data-translate-key="meeting_modal_topic_placeholder">
                </div>
            </div>

            <div class="flex gap-3 mt-8">
                <button onclick="closeMeetingModal()" class="flex-1 py-3 rounded-xl font-bold text-slate-400 hover:bg-slate-50 transition" data-translate-key="meeting_modal_cancel">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="confirmMeeting()" class="flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-blue-700 transition" data-translate-key="meeting_modal_assign">–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="admin-chat-modal" class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[200] hidden items-center justify-center transition-opacity">
        <div class="bg-white rounded-3xl w-full max-w-2xl h-[80vh] shadow-2xl flex flex-col overflow-hidden">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <div>
                    <h3 class="text-xl font-black" data-translate-key="chat_modal_title">–ß–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–æ–º</h3>
                    <p id="chat-client-name" class="text-slate-500 text-sm">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä</p>
                </div>
                <button onclick="closeChatModal()" class="w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-400 hover:text-red-500 transition">‚úï</button>
            </div>
            
            <div id="admin-chat-history" class="flex-1 p-6 overflow-y-auto space-y-4 bg-slate-50/50">
                <!-- Messages -->
            </div>

            <div class="p-4 bg-white border-t border-slate-100 flex gap-3 items-center">
                <input type="text" id="admin-chat-input" class="flex-1 px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:border-blue-500 outline-none font-medium transition-all" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeydown="if(event.key==='Enter') sendAdminMessage()" data-translate-key="chat_modal_placeholder">
                <button onclick="sendAdminMessage()" class="bg-blue-600 text-white w-14 h-14 rounded-2xl flex items-center justify-center hover:bg-blue-700 transition shadow-lg shadow-blue-200">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 ml-1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Sound -->
    <audio id="notification-sound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" preload="auto"></audio>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ù–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="admin-settings-modal" class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[200] hidden items-center justify-center p-4 transition-opacity">
        <div class="bg-white rounded-3xl p-8 w-full max-w-4xl shadow-2xl relative max-h-[90vh] overflow-y-auto">
            <button onclick="closeAdminSettingsModal()" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:text-red-500 transition">‚úï</button>
            
            <h2 class="section-title mb-6" data-translate-key="settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- My Profile Section -->
                <div class="p-8 rounded-3xl border border-slate-200 shadow-sm md:col-span-2">
                    <h3 class="text-xl font-bold mb-6" data-translate-key="settings_profile_title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <div class="space-y-4 text-sm">
                        <div>
                            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider" data-translate-key="settings_profile_name">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
                            <p id="profile-display-name" class="font-medium text-slate-700 mt-1 text-base"></p>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider" data-translate-key="settings_profile_spec">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</label>
                            <p id="profile-display-spec" class="font-medium text-slate-700 mt-1 text-base"></p>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider" data-translate-key="settings_profile_bio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
                            <p id="profile-display-bio" class="font-medium text-slate-700 mt-1 text-base whitespace-pre-wrap"></p>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-400 uppercase tracking-wider" data-translate-key="settings_profile_welcome">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
                            <p id="profile-display-welcome" class="font-medium text-slate-700 mt-1 text-base whitespace-pre-wrap"></p>
                        </div>
                    </div>
                </div>

                <div class="p-8 rounded-3xl border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold mb-6" data-translate-key="settings_appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
                    <div class="flex gap-4">
                        <button id="admin-theme-btn-light" onclick="setTheme('light')" class="flex-1 py-4 border-2 border-slate-100 rounded-2xl font-bold hover:border-blue-500 focus:border-blue-600 transition flex flex-col items-center gap-2">
                            <span class="text-2xl">‚òÄÔ∏è</span> <span data-translate-key="settings_theme_light">–°–≤–µ—Ç–ª–∞—è</span>
                        </button>
                        <button id="admin-theme-btn-dark" onclick="setTheme('dark')" class="flex-1 py-4 border-2 border-slate-100 rounded-2xl font-bold hover:border-blue-500 focus:border-blue-600 transition flex flex-col items-center gap-2">
                            <span class="text-2xl">üåô</span> <span data-translate-key="settings_theme_dark">–¢–µ–º–Ω–∞—è</span>
                        </button>
                    </div>
                </div>

                <div class="p-8 rounded-3xl border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold mb-6" data-translate-key="settings_language">–Ø–∑—ã–∫ —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div class="space-y-4">
                        <label class="flex items-center gap-4 p-4 border border-slate-100 rounded-xl cursor-pointer hover:bg-slate-50 transition">
                            <input type="radio" name="admin-lang" value="ru" onchange="setLanguage('ru')" checked class="w-5 h-5 text-blue-600">
                            <span class="font-bold" data-translate-key="lang_ru">–†—É—Å—Å–∫–∏–π</span>
                        </label>
                        <label class="flex items-center gap-4 p-4 border border-slate-100 rounded-xl cursor-pointer hover:bg-slate-50 transition">
                            <input type="radio" name="admin-lang" value="ua" onchange="setLanguage('ua')" class="w-5 h-5 text-blue-600">
                            <span class="font-bold" data-translate-key="lang_ua">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</span>
                        </label>
                        <label class="flex items-center gap-4 p-4 border border-slate-100 rounded-xl cursor-pointer hover:bg-slate-50 transition">
                            <input type="radio" name="admin-lang" value="en" onchange="setLanguage('en')" class="w-5 h-5 text-blue-600">
                            <span class="font-bold" data-translate-key="lang_en">English</span>
                        </label>
                    </div>
                </div>

                <!-- Danger Zone -->
                <div class="mt-8 bg-red-50 p-8 rounded-3xl border border-red-200">
                    <h3 class="text-xl font-bold mb-2 text-red-800" data-translate-key="settings_delete_account_title">–£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                    <p class="text-red-600 mb-6" data-translate-key="settings_delete_account_desc">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ. –í—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.</p>
                    <button onclick="requestAccountDeletion()" class="bg-red-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:bg-red-700 transition" data-translate-key="settings_delete_account_btn">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>